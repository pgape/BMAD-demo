# 技术栈规范文档

## 1. 项目概述

本文档定义了四人麻将游戏项目的技术栈选择，包括前端、后端、数据库、部署等各个层面的技术选型。这些选择基于项目需求和架构设计文档制定。

## 2. 技术栈选择

### 2.1 前端技术栈

| 类别 | 技术 | 版本 | 用途 | 理由 |
|------|------|------|------|------|
| 框架 | React | 18+ | UI框架 | 社区成熟，组件化能力强，适合复杂游戏界面 |
| 状态管理 | Redux Toolkit | 最新版 | 状态管理 | 与React良好集成，简化状态管理逻辑 |
| UI组件库 | Ant Design | 最新版 | UI组件 | 提供丰富的组件，支持中国风设计 |
| 实时通信 | Spring WebSocket-client | 标准库 | 实时通信 | 与后端WebSocket服务兼容 |
| 构建工具 | Vite | 最新版 | 构建工具 | 快速启动和热更新，提升开发效率 |
| 样式 | Tailwind CSS | 最新版 | 样式框架 | 实用优先的CSS框架，快速开发界面 |

### 2.2 后端技术栈

| 类别 | 技术 | 版本 | 用途 | 理由 |
|------|------|------|------|------|
| 主语言 | Java | 17+ | 主要开发语言 | 企业级应用首选，性能优秀，生态系统成熟 |
| Web框架 | Spring Boot | 3.x | 后端框架 | 快速开发，自动化配置，企业级特性 |
| 实时通信 | Spring WebSocket | 与Spring Boot兼容 | 实时通信 | 与Spring生态无缝集成，支持双向通信 |
| 数据库 | PostgreSQL | 最新版 | 关系型数据库 | 功能强大，可靠性高，支持复杂查询 |
| 缓存 | Redis | 最新版 | 缓存和会话管理 | 高性能，支持多种数据结构，适合游戏状态存储 |
| 消息队列 | RabbitMQ | 最新版 | 消息队列 | 可靠的消息传递，适合处理游戏事件 |
| 容器化 | Docker | 最新版 | 容器化部署 | 环境一致性，易于部署和扩展 |

### 2.3 基础设施

| 类别 | 技术 | 版本 | 用途 | 理由 |
|------|------|------|------|------|
| 负载均衡 | Nginx | 最新版 | 负载均衡 | 高性能，稳定性好，广泛使用 |
| CDN | Cloudflare | 服务 | 内容分发 | 全球节点，提升访问速度 |
| 监控 | Prometheus + Grafana | 最新版 | 系统监控 | 开源方案，强大的监控和可视化能力 |
| 日志 | ELK Stack | 最新版 | 日志管理 | 完整的日志收集、分析和可视化解决方案 |
| 部署 | Kubernetes | 最新版 | 容器编排 | 自动化部署、扩展和管理容器化应用 |

### 2.4 开发工具

| 类别 | 技术 | 版本 | 用途 | 理由 |
|------|------|------|------|------|
| IDE | IntelliJ IDEA | 最新版 | Java开发 | 强大的Java开发工具，智能代码补全 |
| 版本控制 | Git | 最新版 | 版本控制 | 行业标准，分布式版本控制系统 |
| CI/CD | GitHub Actions | 服务 | 持续集成/部署 | 与GitHub集成，自动化构建和部署流程 |

## 3. 技术架构说明

### 3.1 整体架构
- 采用前后端分离的微服务架构
- 前端负责用户界面展示和用户交互
- 后端由多个微服务组成，分别处理认证、匹配、游戏逻辑等不同职责

### 3.2 数据流
1. 前端通过WebSocket与游戏服务器通信
2. 游戏服务器处理游戏逻辑并与数据库交互
3. Redis用于缓存游戏状态和会话管理
4. RabbitMQ处理异步任务和事件通知

### 3.3 部署架构
- 使用Docker容器化所有服务
- 采用Kubernetes进行生产环境编排
- 使用Nginx作为反向代理和静态资源服务
- 通过Cloudflare CDN加速静态资源加载

## 4. 版本管理策略

- 所有技术组件应使用长期支持(LTS)版本或稳定版本
- 定期评估和升级依赖项以获得安全更新和性能改进
- 重大版本升级前需进行充分测试

## 5. 未来扩展考虑

- 架构设计支持插件化扩展，便于添加新功能
- 为AI玩家集成预留接口
- 支持多平台部署，包括Web、iOS、Android
- 预留微服务架构演进空间